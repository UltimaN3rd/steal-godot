[gd_scene load_steps=5 format=1]

[ext_resource path="res://music/menu.ogg" type="AudioStream" id=1]
[ext_resource path="res://music/basic-loop.ogg" type="AudioStream" id=2]
[ext_resource path="res://music/bonus.ogg" type="AudioStream" id=3]

[sub_resource type="GDScript" id=1]

script/source = "\nextends Node\n\nonready var current_scene = get_tree().get_current_scene().get_filename().get_file()\nonready var menu_stream = get_node(\"Menu\")\nonready var level_stream = get_node(\"Levels\")\nonready var bonus_stream = get_node(\"Bonus\")\n\nfunc _ready():\n\tset_fixed_process(true)\n\nfunc _fixed_process(delta):\n\tvar new_scene = get_tree().get_current_scene().get_filename().get_file()\n\t\n\tif(new_scene != current_scene):\n\t\tif(\n\t\t(new_scene == \"menu.tscn\" or\n\t\tnew_scene == \"levelselect.tscn\" or\n\t\tnew_scene == \"options.tscn\")\n\t\tand\n\t\t(current_scene != \"menu.tscn\" and\n\t\tcurrent_scene != \"levelselect.tscn\" and\n\t\tcurrent_scene != \"options.tscn\"\n\t\t)):\n\t\t\tstop_all()\n\t\t\tif(menu_stream.is_playing() == false):\n\t\t\t\tmenu_stream.play()\n\t\telif(new_scene.begins_with(\"e\")):\n\t\t\tstop_all()\n\t\t\tif(bonus_stream.is_playing() == false):\n\t\t\t\tbonus_stream.play()\n\t\telif(new_scene.begins_with(\"i\") or\n\t\tnew_scene.begins_with(\"b\")):\n\t\t\tstop_all()\n\t\t\tif(level_stream.is_playing() == false):\n\t\t\t\tlevel_stream.play()\n\t\telse:\n\t\t\tstop_all()\n\t\tcurrent_scene = new_scene\n\nfunc stop_all():\n\tmenu_stream.stop()\n\tlevel_stream.stop()\n\tbonus_stream.stop()"

[node name="Root" type="Node"]

script/script = SubResource( 1 )

[node name="Menu" type="StreamPlayer" parent="."]

stream/stream = ExtResource( 1 )
stream/play = false
stream/loop = true
stream/volume_db = 0.0
stream/autoplay = false
stream/paused = false
stream/loop_restart_time = 0.0
stream/buffering_ms = 500

[node name="Levels" type="StreamPlayer" parent="."]

stream/stream = ExtResource( 2 )
stream/play = false
stream/loop = true
stream/volume_db = 0.0
stream/autoplay = false
stream/paused = false
stream/loop_restart_time = 0.0
stream/buffering_ms = 500

[node name="Bonus" type="StreamPlayer" parent="."]

stream/stream = ExtResource( 3 )
stream/play = false
stream/loop = true
stream/volume_db = 0.0
stream/autoplay = false
stream/paused = false
stream/loop_restart_time = 0.0
stream/buffering_ms = 500


